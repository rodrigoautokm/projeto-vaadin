// node_modules/@vaadin/grid/src/vaadin-grid-active-item-mixin.js
var ActiveItemMixin = (superClass) => class ActiveItemMixin extends superClass {
  static get properties() {
    return {
      activeItem: {
        type: Object,
        notify: true,
        value: null
      }
    };
  }
  ready() {
    super.ready();
    this.$.scroller.addEventListener("click", this._onClick.bind(this));
    this.addEventListener("cell-activate", this._activateItem.bind(this));
    this.addEventListener("row-activate", this._activateItem.bind(this));
  }
  _activateItem(e) {
    const model = e.detail.model;
    const clickedItem = model ? model.item : null;
    if (clickedItem) {
      this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;
    }
  }
  _onClick(e) {
    if (e.defaultPrevented) {
      return;
    }
    const path = e.composedPath();
    const cell = path[path.indexOf(this.$.table) - 3];
    if (!cell || cell.getAttribute("part").indexOf("details-cell") > -1) {
      return;
    }
    const cellContent = cell._content;
    const activeElement = this.getRootNode().activeElement;
    const cellContentHasFocus = cellContent.contains(activeElement);
    if (!cellContentHasFocus && !this._isFocusable(e.target)) {
      this.dispatchEvent(
        new CustomEvent("cell-activate", {
          detail: {
            model: this.__getRowModel(cell.parentElement)
          }
        })
      );
    }
  }
  _isFocusable(target) {
    return isFocusable(target);
  }
};
var isFocusable = (target) => {
  if (!target.parentNode) {
    return false;
  }
  const focusables = Array.from(
    target.parentNode.querySelectorAll(
      "[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]"
    )
  ).filter((element) => element.getAttribute("part") !== "cell body-cell");
  const isFocusableElement = focusables.includes(target);
  return !target.disabled && isFocusableElement;
};

export {
  ActiveItemMixin,
  isFocusable
};
/**
 * @license
 * Copyright (c) 2016 - 2022 Vaadin Ltd.
 * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
 */
//# sourceMappingURL=chunk-WRZI7T35.js.map
