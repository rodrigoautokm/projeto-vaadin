{
  "version": 3,
  "sources": ["../../@vaadin/flow-frontend/contextMenuConnector.js"],
  "sourcesContent": ["(function () {\n  function tryCatchWrapper(callback) {\n    return window.Vaadin.Flow.tryCatchWrapper(callback, 'Vaadin Context Menu');\n  }\n\n  function getContainer(appId, nodeId) {\n    try {\n      return window.Vaadin.Flow.clients[appId].getByNodeId(nodeId);\n    } catch (error) {\n      console.error('Could not get node %s from app %s', nodeId, appId);\n      console.error(error);\n    }\n  }\n\n  /**\n   * Initializes the connector for a context menu element.\n   *\n   * @param {HTMLElement} contextMenu\n   * @param {string} appId\n   */\n  function initLazy(contextMenu, appId) {\n    if (contextMenu.$connector) {\n      return;\n    }\n\n    contextMenu.$connector = {\n      /**\n       * Generates and assigns the items to the context menu.\n       *\n       * @param {number} nodeId\n       */\n      generateItems: tryCatchWrapper((nodeId) => {\n        const items = generateItemsTree(appId, nodeId);\n\n        contextMenu.items = items;\n      })\n    };\n  }\n\n  /**\n   * Generates an items tree compatible with the context-menu web component\n   * by traversing the given Flow DOM tree of context menu item nodes\n   * whose root node is identified by the `nodeId` argument.\n   *\n   * The app id is required to access the store of Flow DOM nodes.\n   *\n   * @param {string} appId\n   * @param {number} nodeId\n   */\n  function generateItemsTree(appId, nodeId) {\n    const container = getContainer(appId, nodeId);\n    if (!container) {\n      return;\n    }\n\n    return Array.from(container.children).map((child) => {\n      const item = {\n        component: child,\n        checked: child._checked,\n        theme: child.__theme\n      };\n      if (child.localName == 'vaadin-context-menu-item' && child._containerNodeId) {\n        item.children = generateItemsTree(appId, child._containerNodeId);\n      }\n      child._item = item;\n      return item;\n    });\n  }\n\n  /**\n   * Sets the checked state for a context menu item.\n   *\n   * This method is supposed to be called when the context menu item is closed,\n   * so there is no need for triggering a re-render eagarly.\n   *\n   * @param {HTMLElement} component\n   * @param {boolean} checked\n   */\n  function setChecked(component, checked) {\n    if (component._item) {\n      component._item.checked = checked;\n    }\n  }\n\n  /**\n   * Sets the theme for a context menu item.\n   *\n   * This method is supposed to be called when the context menu item is closed,\n   * so there is no need for triggering a re-render eagarly.\n   *\n   * @param {HTMLElement} component\n   * @param {string | undefined | null} theme\n   */\n  function setTheme(component, theme) {\n    if (component._item) {\n      component._item.theme = theme;\n    }\n  }\n\n  window.Vaadin.Flow.contextMenuConnector = {\n    initLazy(...args) {\n      return tryCatchWrapper(initLazy)(...args);\n    },\n\n    generateItemsTree(...args) {\n      return tryCatchWrapper(generateItemsTree)(...args);\n    },\n\n    setChecked(...args) {\n      return tryCatchWrapper(setChecked)(...args);\n    },\n\n    setTheme(...args) {\n      return tryCatchWrapper(setTheme)(...args);\n    }\n  };\n})();\n"],
  "mappings": ";CAAC,WAAY;AACX,WAAS,gBAAgB,UAAU;AACjC,WAAO,OAAO,OAAO,KAAK,gBAAgB,UAAU,qBAAqB;AAAA,EAC3E;AAEA,WAAS,aAAa,OAAO,QAAQ;AACnC,QAAI;AACF,aAAO,OAAO,OAAO,KAAK,QAAQ,OAAO,YAAY,MAAM;AAAA,IAC7D,SAAS,OAAP;AACA,cAAQ,MAAM,qCAAqC,QAAQ,KAAK;AAChE,cAAQ,MAAM,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,WAAS,SAAS,aAAa,OAAO;AACpC,QAAI,YAAY,YAAY;AAC1B;AAAA,IACF;AAEA,gBAAY,aAAa;AAAA,MAMvB,eAAe,gBAAgB,CAAC,WAAW;AACzC,cAAM,QAAQ,kBAAkB,OAAO,MAAM;AAE7C,oBAAY,QAAQ;AAAA,MACtB,CAAC;AAAA,IACH;AAAA,EACF;AAYA,WAAS,kBAAkB,OAAO,QAAQ;AACxC,UAAM,YAAY,aAAa,OAAO,MAAM;AAC5C,QAAI,CAAC,WAAW;AACd;AAAA,IACF;AAEA,WAAO,MAAM,KAAK,UAAU,QAAQ,EAAE,IAAI,CAAC,UAAU;AACnD,YAAM,OAAO;AAAA,QACX,WAAW;AAAA,QACX,SAAS,MAAM;AAAA,QACf,OAAO,MAAM;AAAA,MACf;AACA,UAAI,MAAM,aAAa,8BAA8B,MAAM,kBAAkB;AAC3E,aAAK,WAAW,kBAAkB,OAAO,MAAM,gBAAgB;AAAA,MACjE;AACA,YAAM,QAAQ;AACd,aAAO;AAAA,IACT,CAAC;AAAA,EACH;AAWA,WAAS,WAAW,WAAW,SAAS;AACtC,QAAI,UAAU,OAAO;AACnB,gBAAU,MAAM,UAAU;AAAA,IAC5B;AAAA,EACF;AAWA,WAAS,SAAS,WAAW,OAAO;AAClC,QAAI,UAAU,OAAO;AACnB,gBAAU,MAAM,QAAQ;AAAA,IAC1B;AAAA,EACF;AAEA,SAAO,OAAO,KAAK,uBAAuB;AAAA,IACxC,YAAY,MAAM;AAChB,aAAO,gBAAgB,QAAQ,EAAE,GAAG,IAAI;AAAA,IAC1C;AAAA,IAEA,qBAAqB,MAAM;AACzB,aAAO,gBAAgB,iBAAiB,EAAE,GAAG,IAAI;AAAA,IACnD;AAAA,IAEA,cAAc,MAAM;AAClB,aAAO,gBAAgB,UAAU,EAAE,GAAG,IAAI;AAAA,IAC5C;AAAA,IAEA,YAAY,MAAM;AAChB,aAAO,gBAAgB,QAAQ,EAAE,GAAG,IAAI;AAAA,IAC1C;AAAA,EACF;AACF,GAAG;",
  "names": []
}
