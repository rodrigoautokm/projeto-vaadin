{
  "version": 3,
  "sources": ["../../@vaadin/component-base/src/a11y-announcer.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2022 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { animationFrame } from './async.js';\nimport { Debouncer } from './debounce.js';\n\nconst region = document.createElement('div');\n\nregion.style.position = 'fixed';\nregion.style.clip = 'rect(0px, 0px, 0px, 0px)';\nregion.setAttribute('aria-live', 'polite');\n\ndocument.body.appendChild(region);\n\nlet alertDebouncer;\n/**\n * Cause a text string to be announced by screen readers.\n *\n * @param {string} text The text that should be announced by the screen reader.\n * @param {{mode?: string, timeout?: number}} options Additional options.\n */\nexport function announce(text, options = {}) {\n  const mode = options.mode || 'polite';\n  const timeout = options.timeout === undefined ? 150 : options.timeout;\n\n  if (mode === 'alert') {\n    region.removeAttribute('aria-live');\n    region.removeAttribute('role');\n    alertDebouncer = Debouncer.debounce(alertDebouncer, animationFrame, () => {\n      region.setAttribute('role', 'alert');\n    });\n  } else {\n    if (alertDebouncer) {\n      alertDebouncer.cancel();\n    }\n    region.removeAttribute('role');\n    region.setAttribute('aria-live', mode);\n  }\n\n  region.textContent = '';\n\n  setTimeout(() => {\n    region.textContent = text;\n  }, timeout);\n}\n"],
  "mappings": ";;;;;;;;AAQA,IAAM,SAAS,SAAS,cAAc,KAAK;AAE3C,OAAO,MAAM,WAAW;AACxB,OAAO,MAAM,OAAO;AACpB,OAAO,aAAa,aAAa,QAAQ;AAEzC,SAAS,KAAK,YAAY,MAAM;AAEhC,IAAI;AAOG,SAAS,SAAS,MAAM,UAAU,CAAC,GAAG;AAC3C,QAAM,OAAO,QAAQ,QAAQ;AAC7B,QAAM,UAAU,QAAQ,YAAY,SAAY,MAAM,QAAQ;AAE9D,MAAI,SAAS,SAAS;AACpB,WAAO,gBAAgB,WAAW;AAClC,WAAO,gBAAgB,MAAM;AAC7B,qBAAiB,UAAU,SAAS,gBAAgB,gBAAgB,MAAM;AACxE,aAAO,aAAa,QAAQ,OAAO;AAAA,IACrC,CAAC;AAAA,EACH,OAAO;AACL,QAAI,gBAAgB;AAClB,qBAAe,OAAO;AAAA,IACxB;AACA,WAAO,gBAAgB,MAAM;AAC7B,WAAO,aAAa,aAAa,IAAI;AAAA,EACvC;AAEA,SAAO,cAAc;AAErB,aAAW,MAAM;AACf,WAAO,cAAc;AAAA,EACvB,GAAG,OAAO;AACZ;",
  "names": []
}
